//--------------------------------------------------------------
// rAthena 登錄服務器配置文件
// 本配置文件由 Peter Kieser <pfak@telus.net> 翻譯成英文
//--------------------------------------------------------------
// 提示: 此配置文件中, 只要是以//作為開頭的行, 都是註釋信息. 
// 註釋信息您可以隨意修改, 都不會干擾服務器的正常運行. 
//--------------------------------------------------------------

// 登錄服務器會監聽來自這個IP地址的網卡信息
// 注意: 該選項允許你在有多個公網網卡(也意味著有多個公網IP)的機器上, 
//       使用相同的「登錄服務器端口」來開多個服. 
// 提醒: 若您想啟用bind_ip選項的話, 記得去掉bind_ip前面的註釋符//, 否則
//       服務器會忽略它, 導致配了和沒配一樣. 
bind_ip: 127.0.0.1
 
// 登錄服務器端口
login_port: 6900

// 往控制台窗口(俗稱:黑框)中輸出內容時, 在每行信息的前面加上時間戳. 
// 最大長度不能超過20個字符. 
// 常用的格式有:
//   %I:%M:%S %p (小時:分鐘:秒數 12小時制, 會攜帶AM或PM標記)
//   %H:%M:%S (小時:分鐘:秒數, 24小時制)
//   %d/%b/%Y (日期/月份/年份)
// 更多的格式信息, 請參考C語言的strftime函數用法. 
// 
// rAthena官方默認值是 [%d/%b %H:%M] 也就是24小時制的 [日/月 時:分]
// 不過這明顯不符合國人習慣, 為此rAthenaCN將其默認值改成了 [%Y/%m/%d %H:%M] 
// 
// 若想啟用時間戳的話, 請將下面這一行頭部的註釋符//去掉
//timestamp_format: [%Y/%m/%d %H:%M] 

// 當終端被一些加載器打開從而導致輸出信息被重定向時, 
// 是否也將顏色代碼一同輸出? 
// 
// 問: 什麼是重定向? 
// 答: 原本登錄服務器的信息將直接顯示到自己的黑框, 不過若使用一些啟動工具
//     來啟動登錄服務器的話, 原本應該顯示到黑框的信息被顯示到了啟動工具裡面的
//     一個列表之類, 這種情況稱之為「輸出信息被重定向了」! 
// 
// 問: 什麼是顏色代碼? 
// 答: 在我們使用黑框的過程中, 會發現類似[Status]的字是綠色的, 
//     而[Error]是紅色的. 這是因為在程序往黑框輸出信息時, 加入了一些
//     顏色編碼, 比如若使用顏色編碼「\033[1;31m」那麼則表示接下來的字用紅色輸出
//     其實有點類似我們腳本中使用的^xxxxxx顏色代碼. 
// 
// 此選項一般情況下推薦關閉
stdout_with_ansisequence: no

// 記錄登錄服務器黑框中產生的部分信息到/log/目錄中
// 首先您要確保rAthena的目錄中有一個log文件夾, 沒有的話必須手動創建, 
// 否則日誌文件將不會產生. 
// 1: 記錄黑框中以  [Warning] 開頭的警告信息
// 2: 記錄黑框中以  [Error]   開頭的錯誤信息和數據庫錯誤信息
// 4: 記錄黑框中以  [Debug]   開頭的調試信息
// 例如: 想要記錄[Warning]、[Error]、[Debug]開頭的信息, 
//       只需要將1、2、4相加, 將 console_msg_log 設置為7即可(1+2+4=7)! 
// 
// 日誌信息的記錄, 並不會被 console_silent 選項影響
// 也就是說, 假如 console_msg_log 設置為 2 想記錄 [Error] 信息, 而
// 在 console_silent 中設置為 16 想隱藏 [Error] 信息, 此時系統
// 將會隱藏[Error]信息, 與此同時記錄[Error]信息
console_msg_log: 7

// 將登錄服務器黑框中產生的要記錄的信息, 寫到下面指定的日誌文件中
console_log_filepath: ./log/login-msg_log.log

// 選擇性隱藏登錄服務器黑框中顯示出來的一些提示信息: 
// 1:  隱藏黑框中以  [Info]    開頭的提示信息
// 2:  隱藏黑框中以  [Status]  開頭的狀態信息
// 4:  隱藏黑框中以  [Notice]  開頭的注意信息
// 8:  隱藏黑框中以  [Warning] 開頭的警告信息
// 16: 隱藏黑框中以  [Error]   開頭的錯誤信息和數據庫錯誤信息
// 32: 隱藏黑框中以  [Debug]   開頭的調試信息
// 若您想同時隱藏多種信息, 只需要將其對應的數字相加即可
// 例如: 若您想要隱藏[Info]、[Status]、[Notice]開頭的信息, 
//       那麼只需要將1、2、4相加, 填寫7即可(1+2+4=7)! 
console_silent: 0

// 是否啟用終端指令
// 開啟終端指令後, 您可以在login-server的黑框中輸入命令
// 在登錄服務器的黑框中輸入help然後回車, 可以查看終端指令說明
// 比如輸入server:reloadconf可以讓登錄服務器重新讀取相關的配置文件
// 還能輸入"create:用戶名 密碼 性別"（不含引號）來直接創建一個新賬號
// 想要啟用這個功能的話, 請將下面的值改成on即可
// 請避免在登錄服務器中使用 >& 日誌文件.log 這樣的輸出指令
console: off

// 是否允許使用 _M/_F 的方式來註冊新賬號? 
new_account: yes

// 若您將new_account設置為yes的話
// 那麼是否要求新建的賬號和密碼的長度都必須大於等於4個字符? 
// 在一般情況下推薦設置為yes, 除非您在Diff客戶端的時候
// 啟用了'Disable 4 LetterUserID/Password'選項, 那麼可以設置為no
new_acc_length_limit: yes

// 賬號註冊洪水攻擊防護機制
// 
// 問: 什麼是賬號註冊洪水攻擊? 
// 答: 專門編寫一些程序, 在短時間內註冊成千上萬個賬號, 這就是賬號註冊洪水攻擊. 
// 
// Sola、小克: 
// 我查了一下代碼, 這一塊 rAthena 代碼寫的有點問題, 以後找時間修改.
// 問題在於設定為10秒中內允許1個賬號, 而實際上在10秒鐘內第 1 和第 2 個賬號
// 能註冊成功, 但第 3 個賬號就會由於這個防護機制而註冊失敗. 驗證於: 2015年7月4日21:54:14
// 
// 在 time_allowed 限定的時間內, 最多允許註冊幾個賬號? 
allowed_regs: 1
// 下面的選項寫10的話(秒), 那麼說明10秒中內最多只能註冊 allowed_regs 個賬號
time_allowed: 10

// 日誌文件名
// 和登錄服務器相關的操作都會被記錄到這個文件中
// 
// 這個選項已經被rAthena棄用
// 代碼中根本沒有任何地方使用到此選項
// 大家請無視他, 避免浪費表情了
login_log_filename: log/login.log

// 是否記錄登錄服務器產生的日誌
// 日誌內容包括: 
//   登錄服務器啟動時記錄日誌
//   登錄服務器關閉時記錄日誌
//   某個用戶的鼠標密碼驗證失敗時記錄日誌
//   某個用戶登錄成功
//   某個用戶登錄失敗
//   角色服務器和登錄服務器建立了連接
//   某個被加入黑名單的IP地址對登錄服務器發起連接請求
// 
// 日誌信息默認情況下, 記錄在日誌數據庫的loginlog表中
// 設置為1則表示記錄日誌(默認), 設置為0則表示不記錄日誌
log_login: yes

// 登錄服務器在顯示時間的時候, 用什麼格式顯示? 
// 
// 這個字段被使用的地方其實比較有限, 目前找到下面兩個: 
// 1、當玩家登錄時如果這個賬號已經被封禁, 
//    那麼會在登錄服務器的黑框中顯示出一個日期, 這個日期就遵循下面的格式. 
// 2、當角色服務器請求登錄服務器封禁一個賬號時, 
//    在登錄服務器的黑框中也會顯示出一個提示信息, 這個日期也會遵循下面的格式. 
date_format: %Y-%m-%d %H:%M:%S

// 僅 group_id 為「等於」指定數字的賬號才能登錄到服務器
// 假如您填寫的數字是 99 那麼表示只有 group_id 等於 99 的賬號才能登錄到服務器
// 其他賬號登入時則會提示服務器正在維護, 無法登錄
// 
// 填寫 -1 表示關閉此機制(默認)
// 填寫 0或其他大於0的數 表示僅 group_id 為指定數值的賬號可登陸
group_id_to_connect: -1

// 僅 group_id 為「大於等於」指定數字的賬號才能登錄到服務器
// 假如您填寫的數字是 10 那麼表示只有 group_id 大於等於 10 的賬號才能登錄到服務器
// 其他賬號登入時則會提示服務器正在維護, 無法登錄
// 
// 注意: 如果 group_id_to_connect 的值不是-1的話, 那麼此開關無效
// 填寫 -1 表示關閉此機制(默認)
// 填寫 0或其他大於0的數 表示僅 group_id 大於等於指定數值的賬號可登陸
min_group_id_to_connect: -1

// 哪個group_id將被指定為VIP玩家組(即: VIP玩家組別)? 
// 默認值為: 5
// 當一個玩家被提升到VIP玩家組時, 那麼他的group_id會從默認的0變成5
vip_group: 5

// 普通賬號允許建立幾個角色? 
// 您設定的數字不能超過 mmo.h 代碼文件中 MAX_CHARS 的值(默認是9), 
// 否則超過的話, 最多還會是9個角色.
// 
// 若設置為 0 的話, 那麼默認值是 core.h 代碼文件中 MIN_CHARS 所設定的值
// 實際上, MIN_CHARS 的值會根據以下情況變化: 
// - 若定制編譯時沒開啟VIP會員系統, 那麼 MIN_CHARS 默認等於 MAX_CHARS (也就是9)
// - 若定制編譯時已開啟VIP會員系統, 那麼 MIN_CHARS 默認值是 3
// 
// 注意: rAthenaCN 默認不開啟VIP會員系統, 想要開啟的話請前往官網進行免費定制
chars_per_account: 0

// VIP 賬號的角色數量比普通賬號多幾個? (默認為0個, 表示關閉此機制)
// 提示1: VIP 賬號的角色數量上限為 = MAX_CHARS(默認是9) - chars_per_account 的值.
// 提示2: 此選項在你修改了 chars_per_account 的值之後, 也必須設置一下.
// 若您想提高 vip_char_increase 的上限, 請先在 mmo.h 文件中提高 MAX_CHARS 的值. 
// 默認值為: -1
vip_char_increase: -1

// 剛創建的賬號有多長的遊戲時間? 
// 若設置為 -1 表示新建的賬號擁有無限的遊戲時間(默認)
// 若設置為 0 或者其他數字, 則表示新賬號將在指定的秒數之後過期
// 
// 當過期時間到了之後, 這個玩家若在線, 則會被強制下線, 並無法再登錄
// 除非完成續期操作, 才能重新進入遊戲. 
start_limited_time: -1

// 是否檢查客戶端 clientinfo.xml 中配置的 version 字段? 
check_client_version: no

// 當啟用了 check_client_version 的話
// 那麼只有 version 等於多少的客戶端才允許連接? 
client_version_to_connect: 20

// 在數據庫的 login 表中保存密碼時, 是否使用MD5哈希密碼? 
// 提示: 當客戶端使用 <passwordencrypt> 機制的話, 此功能不可用. 
// Sola、小克: 我不知道 <passwordencrypt> 機制是個什麼東西, 若您知道的話, 望不吝賜教, 感謝! 
// 
// 若你之前使用 no 選項, 現在想修改成 yes 的話, 需要在主數據庫中執行以下查詢語句:
// UPDATE `login` SET `user_pass`=MD5(`user_pass`);
// 否則修改此選項之前註冊的賬號將無法正常登錄. (感謝"好刀一把"建議).
use_MD5_passwords: no

// IP地址黑名單功能
ipban_enable: yes
// 當密碼重試超過指定次數時, 將IP加入黑名單
ipban_dynamic_pass_failure_ban: yes
// 在幾分鐘內密碼重試次數超過限制時, 加入黑名單? (默認5次)
ipban_dynamic_pass_failure_ban_interval: 5
// 當密碼重試次數達到多少次之後, 認為超過限制? (默認7次)
ipban_dynamic_pass_failure_ban_limit: 7
// 將IP加入黑名單後, 封禁多長時間(以分鐘為單位)? (默認5分鐘)
ipban_dynamic_pass_failure_ban_duration: 5
// 每間隔多長時間自動清理過了封禁期的IP地址? 0 = 不清理. 默認值為 60.
// 提示: 如果設置為不清理, 那麼過了封禁期的IP地址將會在登錄服務器啟動和退出時被清空. 
// 玩家的IP地址雖然還在黑名單列表中, 不過由於已經過了封禁期, 所以玩家可以正常登錄. 
ipban_cleanup_interval: 60

// 間隔多長時間(分鐘)進行一次DNS/IP更新? (此功能默認關閉)
// 若您的服務器使用的是動態IP地址, 且每過一段時間IP地址會自動變化的話, 請啟用此選項. 
//ip_sync_interval: 10

// DNS封禁黑名單機制
// 若啟用此機制, 任何連接請求都會先檢查對方是否在黑名單中, 若在黑名單中則禁止連接
// 
// 問: 為什麼叫「DNS封禁黑名單」? 
// 答: 因為系統用來判定對方是否在黑名單中的根據, 是將IP地址組成一個域名, 然後看看
//     這個域名是否已經被DNS服務器所解析, 若是, 則認為對方在黑名單中. 
// 
// 問: 具體的工作機制是什麼樣的? 
// 答: 當一個服務器收到連接請求時, 會先獲得對方的IP地址, 比如127.0.0.1, 然後將這個
//     IP地址反序, 變成1.0.0.127, 然後拼接上 dnsbl_servers 所指定的DNS服務器, 比如
//     若和 bl.blocklist.de 拼接, 那麼最終會拿到一個為 1.0.0.127.bl.blocklist.de 的
//     域名, 然後對這個域名做解析, 如果解析成功, 則認為對方在黑名單內. 
// 
// 問: 為什麼會有這樣的機制存在? 
// 答: 在國外會有一些安全機構(或者個人), 他們會找出一些攻擊過某些服務器的IP地址, 將
//     他們用上面的方式變成一個域名, 並完成解析來標記這個IP地址為壞人, 
//     以此來協助其他人, 來快速的識別一個IP地址是否可以信任. 
// 
// 問: 會有什麼副作用麼? 
// 答: 從原理上講, 啟用這個機制會導致每一次連接都會做IP地址檢查, 所以開啟之前玩家
//     輸入賬號密碼後登錄會很快的返回登錄結果, 開啟之後可能要比原來多花1-2秒的時間! 
//     此外, 這個機制依賴服務器本身的DNS服務器可靠性, 假設有人劫持您的DNS解析結果, 
//     讓每一個請求都返回「已解析」的樣子, 那麼會導致登錄服務器拒絕一切連接. 
use_dnsbl: no
dnsbl_servers: bl.blocklist.de, socks.dnsbl.sorbs.net
// 在這裡可以查到免費的DNS黑名單服務: http://en.wikipedia.org/wiki/Comparison_of_DNS_blacklists
//==============================================================================
// DNS黑名單服務                   描述
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// bl.blocklist.de                 攻擊其他服務器(或者蜜罐)的SSH、FTP、IMAP等其他服務的攻擊者IP地址
// ircbl.ahbl.org                  AHBL (open proxies, compromised machines, comment spammers)
// safe.dnsbl.sorbs.net            All zones in dnsbl.sorbs.net except "recent" and "escalations"
// sbl-xbl.spamhaus.org            Spamhaus blacklist (spammers, open proxies)
// socks.dnsbl.sorbs.net           開放的SOCKS代理服務器IP地址
// tor.ahbl.org                    Current tor relay and exit nodes

// 客戶端MD5指紋校驗
// 若打開此選項, 那麼登錄服務器會校驗客戶端的MD5指紋
// 如果是不認識的客戶端, 則禁止連接到服務器
// 提示: 您可以查看 'doc/md5_hashcheck.txt' 以便獲得更詳細的信息.
client_hash_check: off

// 客戶端MD5指紋列表
// 只有 group_id 大於等於指定數值的玩家, 可以使用指定指紋的客戶端登錄遊戲
// 
// 當您特殊指定一個指紋為 'disabled' 的話, 則表示 group_id 大於等於指定數值的玩家
//     可以無視客戶端指紋限制, 隨時都可以登錄遊戲(哪怕客戶端不發送MD5指紋都可以登錄)
// 
// 注意: 想使用此功能, 那麼必須在Diff客戶端的時候, 讓客戶端發送指紋封包
// 做法: 在使用NEMO對客戶端進行Diff的時候, 需要啟用 'Force Send Client Hash Packet (Experimental)' 選項
// 
// 格式: group_id, hash指紋
// 提示: 您可以查看 'doc/md5_hashcheck.txt' 以便獲得更詳細的信息.
// 
// 下面這個例子中, group_id大於等於  0 的玩家可使用指紋為113e195e6c051bb1cfb12a644bb084c5的客戶端登錄
//client_hash: 0, 113e195e6c051bb1cfb12a644bb084c5
// 
// 下面這個例子中, group_id大於等於 10 的玩家可使用指紋為cb1ea78023d337c38e8ba5124e2338ae的客戶端登錄
//client_hash: 10, cb1ea78023d337c38e8ba5124e2338ae
//
// 下面這個例子中, group_id大於等於 99 的玩家可無視指紋登錄限制, 使用任何客戶端都可以登錄
//client_hash: 99, disabled

import: conf/inter_athena.conf
import: conf/import/login_conf.txt
